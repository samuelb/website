<!DOCTYPE html>
<html lang="de-de">
	<head>
		<meta charset="utf-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		
		
		<title>Mate Dealer</title>
		
		<link rel="stylesheet" href="https://reaktor23.org/css/bootstrap.min.css"/>
		<link rel="stylesheet" href="https://reaktor23.org/css/font-awesome.min.css"/>
		<link rel="stylesheet" href="https://reaktor23.org/css/style.css"/>
		<link rel="stylesheet" href="https://reaktor23.org/css/opensans.css"/>
		<link rel="stylesheet" href="https://reaktor23.org/css/featherlight.min.css"/>
		<meta name="theme-color" content="#46b71d">
		
	</head>
	<body>
		<a href="https://github.com/reaktor23/website" class="github-corner d-none d-sm-block" aria-label="View source on Github">
  <svg width="80" height="80" viewBox="0 0 250 250" style="fill: #46b71d; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
    <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
    <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
    <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
  </svg>
</a>
<style>
  .github-corner:hover .octo-arm {
    animation:octocat-wave 560ms ease-in-out
  }
  @keyframes octocat-wave {
    0%, 100% { transform:rotate(0) }
    20%, 60% { transform:rotate(-25deg) }
    40%, 80% { transform:rotate(10deg) }
  }
  @media (max-width:500px) {
    .github-corner:hover .octo-arm {
      animation:none
    }
    .github-corner .octo-arm {
      animation:octocat-wave 560ms ease-in-out
    }
  }
</style>

		<div class="container" role="main">
		<header>
	<nav class="navbar navbar-expand-md mb-4 navbar-light">
		<a href="https://reaktor23.org" class="navbar-brand mr-5"><img src="/img/logo.png" alt="Reaktor23 - Hackerspace"></a>
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="navbarNav">
			<ul class="navbar-nav">
				
				
				<li class="nav-item mr-3">
					<a href="/blog/" class="nav-link">Blog</a>
				</li>
				
				<li class="nav-item mr-3">
					<a href="/about/" class="nav-link">About</a>
				</li>
				
				<li class="nav-item mr-3">
					<a href="/projects/" class="nav-link">Projects</a>
				</li>
				
				<li class="nav-item mr-3">
					<a href="/talks/" class="nav-link">Talks</a>
				</li>
				
			</ul>
		</div>
        <div id="reaktorstatus" class="text-center">
            Reaktor status:
            <div id="message" class="text-success"></div>
            <div class="small"><a href="/status/"><i class="fa fa-info-circle" aria-hidden="true"></i></a></div>
        </div>
	</nav>
</header>


		
<article>
    <header>
        <h1 class="headline my-3"><a href="https://reaktor23.org/projects/matedealer/">Mate Dealer</a></h1>
        <div class="meta">
            
            <span class="author">by Bouni 
                 - 
            </span>
            
            
            <time datetime="2017-12-31">2017-12-31</time>
            
        </div>
        <div>
        <div class="project-image-frame">
            <img class="project-image-single" src="vendo_1.jpg" alt="Project image">
        </div>
        </div>
    </header>
    
    <aside class="panel panel-default">
        <div class="panel-heading">Table Of Conent</div>
        <div class="panel-body">
            <nav id="TableOfContents">
  <ul>
    <li><a href="#verschiedenste-dokumente-zu-sanden-vendo-geräten">Verschiedenste Dokumente zu Sanden Vendo Geräten</a></li>
  </ul>

  <ul>
    <li><a href="#dezember-2010">Dezember 2010</a></li>
    <li><a href="#januar-2011">Januar 2011</a></li>
    <li><a href="#februar-2011">Februar 2011</a></li>
    <li><a href="#märz-2011">März 2011</a></li>
    <li><a href="#april-2011">April 2011</a></li>
    <li><a href="#august-2011">August 2011</a></li>
    <li><a href="#september-2011">September 2011</a></li>
    <li><a href="#oktober-2011">Oktober 2011</a></li>
    <li><a href="#november-2011">November 2011</a></li>
    <li><a href="#dezember-2011">Dezember 2011</a></li>
    <li><a href="#januar-2012">Januar 2012</a></li>
    <li><a href="#february-2012">February 2012</a></li>
    <li><a href="#march-2012">March 2012</a></li>
    <li><a href="#april-2012">April 2012</a></li>
    <li><a href="#may-2012">May 2012</a></li>
    <li><a href="#juni-2012">Juni 2012</a></li>
    <li><a href="#juli-2012">Juli 2012</a></li>
    <li><a href="#juli-2013">Juli 2013</a></li>
  </ul>

  <ul>
    <li><a href="#falsche-münzrohre">Falsche Münzrohre</a></li>
    <li><a href="#fehlender-schlüssel">Fehlender Schlüssel</a></li>
    <li><a href="#cashless-device">Cashless Device</a></li>
    <li><a href="#vmc-parametrierung">VMC Parametrierung</a></li>
    <li><a href="#füllstandsüberwachung">Füllstandsüberwachung</a></li>
  </ul>

  <ul>
    <li><a href="#bargeldloses-bezahlen">Bargeldloses Bezahlen</a></li>
    <li><a href="#genaue-füllstandsanzeige">Genaue Füllstandsanzeige</a></li>
    <li><a href="#temperatur-logging">Temperatur Logging</a></li>
    <li><a href="#regelung-des-kühlaggregates">Regelung des Kühlaggregates</a></li>
    <li><a href="#display-scheibe">Display Scheibe</a></li>
  </ul>

  <ul>
    <li><a href="#grundlegende-beschaltung">Grundlegende Beschaltung</a></li>
    <li><a href="#was-alles-auf-die-platine-soll">Was alles auf die Platine soll</a></li>
  </ul>

  <ul>
    <li><a href="#how-to-zu-gnupg-mit-smartcard">How To zu GnuPG mit SmartCard</a></li>
  </ul>
</nav>
        </div>
    </aside>
    
    <p>There is a enlish version of this site: <a href="projects:mate_dealer_en">Mate Dealer</a></p>
<p>Der MateDealer in der hier beschriebenen Konfiguration ist tot.
Die Mechanischen Teile werden für den <a href="projects:matedealer2">MateDealer 2.0</a> benutzt.</p>
<h1 id="der-ausgangszustand">Der Ausgangszustand</h1>
<ul>
<li>Hersteller: <a href="http://www.sandenvendo.com/">Sanden Vendo</a></li>
<li>Model: VDI 100-5</li>
<li>5 Produktschächte</li>
<li>Betriebsspannung: 230VAC 50Hz</li>
<li>Nominale Leistungsaufnahme: 450W</li>
<li>Gewicht: 200kg</li>
<li>Baujahr: 02/2003</li>
<li>Kaufpreis: ~400 €</li>
<li>Münzprüfer <a href="http://www.nri.de/">NRI</a> G40.4000/4-0752 (EUR &amp; GBP)</li>
</ul>
<p>

<figure class="figure m-1">
    <a href="/projects/matedealer/vendo_1.jpg" data-featherlight="image">
        <img src="/projects/matedealer/vendo_1_hu07d761b5ead7747cfdbc0ed653c4f0cb_2074235_300x0_resize_q80_lanczos.jpg" class="figure-img img-thumbnail horizontal" width="300">
    </a>
    
</figure>



<figure class="figure m-1">
    <a href="/projects/matedealer/vendo_2.jpg" data-featherlight="image">
        <img src="/projects/matedealer/vendo_2_hu2b990e0952cbfb9b7743b6b0ef9b37a6_1955845_300x0_resize_q80_lanczos.jpg" class="figure-img img-thumbnail horizontal" width="300">
    </a>
    
</figure>



<figure class="figure m-1">
    <a href="/projects/matedealer/vendo_3.jpg" data-featherlight="image">
        <img src="/projects/matedealer/vendo_3_hu3d0d365f36101c4cffa8d7cb6d8e64fd_2071033_300x0_resize_q80_lanczos.jpg" class="figure-img img-thumbnail horizontal" width="300">
    </a>
    
</figure>
</p>
<p>So sah der Automat aus als wir ihn abgeholt haben.</p>
<h1 id="unterlagen-zum-automaten">Unterlagen zum Automaten</h1>
<ul>
<li><a href="bb01_einstellanleitung_080306_de.pdf">Einstell Anleitung für die BB01 Steuerplatine</a></li>
<li><a href="vendo_vdi_100-5_programmieranleitung.pdf">Programmieranleitung für den Automaten</a></li>
<li><a href="g46f4000_de.pdf">Handbuch zum Münzprüfer</a></li>
<li><a href="tubenvarianten_g46.pdf">Verfügbare Tubenvarianten des Münzprüfers</a></li>
<li><a href="mdb_version_4-2.pdf">Spezifikation zum MDB Protokoll</a></li>
<li><a href="matedealer13.12.2011.rar">Ein Log der Kommunikation vom 13.12.2011</a></li>
</ul>
<h2 id="verschiedenste-dokumente-zu-sanden-vendo-geräten">Verschiedenste Dokumente zu Sanden Vendo Geräten</h2>
<p><a href="http://109.170.209.5:591/Part%20Manuals/Vendo/">Ein ?FTP? mit PDF&rsquo;s</a></p>
<hr>
<h1 id="projekt-history">Projekt History</h1>
<h2 id="dezember-2010">Dezember 2010</h2>
<ul>
<li>04.12.2010: Wir haben die ersten Logs der Kommunikation zwischen VMC und Münzprüfer aufgezeichnet.</li>
</ul>
<h2 id="januar-2011">Januar 2011</h2>
<ul>
<li>25.01.2011: Nach einiger Zeit des Lesens der MDB Spezifikation haben wir erste Versuche unternommen mit einem Optokoppler und dem STK500 + AtMega644P die Kommunikation zwischen Münzprüfer und VMC mitzulesen. Leider hatten wir keinen Erfolg was vermutlich am gewählten Optokoppler Typ liegt (PC814)</li>
</ul>
<h2 id="februar-2011">Februar 2011</h2>
<ul>
<li>19.02.2011: Nachdem wir im Dezember Log festgestellt hatten das der VMC das Chashless Device welches wir mit hilfe des AtMegas simulieren wollen nicht adressiert, haben wir beim Hersteller des Automaten ein neues EEPROM gekauft, und diesers nun eingebaut. Im neuen Log ist schön zu sehen das das Cashless Device adressiert wird.</li>
</ul>
<h2 id="märz-2011">März 2011</h2>
<ul>
<li>
<p>01.03.2011: Nach dem wir von einem PC814 auf einen PC817 umgestiegen sind klappt der Empfang immer noch nicht wie gedacht. Die Nachfolgenden Bilder zeigen was mit dem Oszi sichtbar wurde. Die steigenden Flanken (untere Bildhälfte) steigen viel zu langsam an. im ersten Bild ist ein 10k Pullup verwendet worden, im zweiten dann ein 1k5. \ <img src="20110301_003.jpg" alt=""></p>
</li>
<li>
<p>12.03.2011: Heute wurde ein Versuch unternommen mit schnellen PC900 Optokopplern das Problem in den Griff zu bekommen. Ergebinis ist ein gesprengter PC900 und ein gelöschtes/defektes ROM im Münzprüfer. Nach dem Test wurde das PC817 Board nochmal angeschlossen und mit diesem ein Test mit kleinerem Pullup (470R) und einem grösseren Vorwiderstand (560R) gemacht und das brachte den ersehnten Erfolg.</p>
</li>
</ul>
<p><strong>Milestone</strong> Der Empfang der MDB Daten klappt nun wie gedacht.</p>
<ul>
<li>23.03.2011: Seit heute klappt nun auch das senden von MDB Kommandos</li>
</ul>
<p><strong>Milestone</strong> Das senden von MDB Daten klappt nun auch.</p>
<h2 id="april-2011">April 2011</h2>
<ul>
<li>
<p>15.04.2011: Die ersten Gehversuche sind gemacht. Das MDB Protokoll ist ein wenig komisch aber wir lassen uns nicht entmutigen.</p>
</li>
<li>
<p>20.04.2011: Die ersten Befehle (RESET, SETUP) sind implementiert und funktioneieren auch schon. Das ausgeben eines Getränks ist aber noch nicht möglich.</p>
</li>
<li>
<p>21.04.2011: Das erste Getränk wurde dem Automaten entlockt. Irgendetwas scheint aber noch nicht zu passen, da das eher Zufall war.</p>
</li>
<li>
<p>22.04.2011: Wie es aussieht ist ein fetter Bug im Code. Wenn man sich &ldquo;beeilt&rdquo; bekommt man ein Getränk aus dem Automaten, wenn man aber zu lange wartet versagt die ganze Kommunikation.</p>
</li>
<li>
<p>30.04.2011: Das Problem ist gefunden. Ein Fehlerhaft implementierter FiFo Buffer war die Ursache. Wenn man vor dem Überlauf das Getränk bezogen hat ging es, danach ging etwas schief. Nach dem beheben des Fehlers klappt das beziehen eines Getränks nun ohne Probleme. Das ganze ist momentan über 2 Taster gelöst. Taster 1 ist das authentifizieren eines Kunden am Automaten mit einem Festen Guthaben von 23€. Taste 2 ist das freigeben des Ausgabevorganges mit fixen 2€ Getränkepreis.</p>
</li>
</ul>
<p>*<em>Milestone</em> Es ist nun möglich ein Getränk aus dem Automaten zu ziehen.</p>
<p><img src="https://vimeo.com/24110627" alt=""></p>
<h2 id="august-2011">August 2011</h2>
<ul>
<li>
<p>01.08.2011: In den letzten Monaten wurde der Code weitreichend überarbeitet. Beide Seriellen Verbindungen (MDB,Uplink) sind nun sowohl sendend als auch empfangend mit einem FiFo gepuffert. Ausserdem geschieht das Empfangen und senden im Interrupt Betrieb. Auch die anfangs verwendeten while Schleifen um auf neue Daten zu warten wurden erstezt und es ist nun mehr Zeit etwas sinnvolles in de Main Loop zu tun.</p>
</li>
<li>
<p>02.08.2011: Heute wurde das zusammenspiel des Python Scripts auf dem SingleBoard PC mit der uC Schaltung getestet. Nun kann für mehrere Benutzer in einer Datenbank ein Guthaben hinterlegt werden von dem beim Bezug eines Getränks abgebucht wird. Ebenso werden Getränkpreise in der Datenbank hinterlegt und der Verbrauch der einzelnen Getränkesorten geloggt um eine kleine Statistik über den Verbrauch und die Beliebtheit erstellen zu können. Dies geschieht nicht Personenbezogen.</p>
</li>
</ul>
<p><strong>Milestone</strong> Das Backend ist in einer frühen alpha Phase funktioniert aber schon gut.</p>
<h2 id="september-2011">September 2011</h2>
<ul>
<li>20.09.2011 Es wurde der Entschluss gefasst das Projekt auf ein Arduino Board zu portieren.</li>
</ul>
<h2 id="oktober-2011">Oktober 2011</h2>
<ul>
<li>Die Portierung ist immer noch im Gange wenn auch langsamer als gedacht. Die Idee vom Anfang das ganze in &ldquo;Arduino Code&rdquo; zu portieren wurde verworfen. es wird sich wieder um reinen C-Code handeln, denn die Arduino Serial Lib unterstützt keine anderen Modi als 8,N,1</li>
</ul>
<h2 id="november-2011">November 2011</h2>
<ul>
<li>ein fauler monat</li>
</ul>
<h2 id="dezember-2011">Dezember 2011</h2>
<ul>
<li>ein weiterer fauler monat</li>
</ul>
<h2 id="januar-2012">Januar 2012</h2>
<ul>
<li>10.01.2012 Heute wurden einige Aufzeichnungen mit dem Oszi gemacht um gute Widerstandswerte für Rv und Pullup der Optokoppler zu ermitteln. Die Ergebnisse sind nicht besonders gut, aber ausreichend.</li>
</ul>
<p>

<figure class="figure m-1">
    <a href="/projects/matedealer/optocoupler_100112_1.png" data-featherlight="image">
        <img src="/projects/matedealer/optocoupler_100112_1_hu6f2bac159ab0bd2dd0a48a25ff04bd24_5417_350x0_resize_lanczos_3.png" class="figure-img img-thumbnail horizontal" width="350">
    </a>
    
</figure>



<figure class="figure m-1">
    <a href="/projects/matedealer/optocoupler_100112_2.png" data-featherlight="image">
        <img src="/projects/matedealer/optocoupler_100112_2_hu9057058304d121b274298260c084c8d9_5515_350x0_resize_lanczos_3.png" class="figure-img img-thumbnail horizontal" width="350">
    </a>
    
</figure>



<figure class="figure m-1">
    <a href="/projects/matedealer/optocoupler_100112_3.png" data-featherlight="image">
        <img src="/projects/matedealer/optocoupler_100112_3_hucab0c5347208d9ff6610383ed0e0b5a9_5694_350x0_resize_lanczos_3.png" class="figure-img img-thumbnail horizontal" width="350">
    </a>
    
</figure>
</p>
<p>hellblau ist die LED Seite an der das Arduino Board hängt, gelb die Transistorseite. Übertragen wurde mit 9600Baud.</p>
<h2 id="february-2012">February 2012</h2>
<ul>
<li>kein Fortschritt</li>
</ul>
<h2 id="march-2012">March 2012</h2>
<ul>
<li>kein Fortschritt</li>
</ul>
<h2 id="april-2012">April 2012</h2>
<ul>
<li>kein Fortschritt</li>
</ul>
<h2 id="may-2012">May 2012</h2>
<ul>
<li>kein Fortschritt (Aber die Hoffnung das Projekt wiederzubeleben ;) )</li>
</ul>
<h2 id="juni-2012">Juni 2012</h2>
<ul>
<li>Ich habe die Zeit gefunden an meinem Code rewrite weiter zu arbeiten, evtl. kann die nächsten Dienstage ein Test stattfinden :) Yeah baby, yeah &mdash;Bouni</li>
</ul>
<h2 id="juli-2012">Juli 2012</h2>
<ul>
<li>
<p><strong>04.07.2012</strong> Am gestrigen Dienstag hab ich endlich wieder am MateDealer weiter gearbeitet. Ich hab zwar den Code nicht vollständig fertig bekommen, aber etliche Fehler gefunden und behoben und bis zum //begin session// funktioniert nun alles. Auch die Uplink Kommunikation funktioniert sauber. Ausserdem hab ich ein kleines Stück Lochstreifen Platine in ein &ldquo;Arduino Mega MDB Shield&rdquo; verwandelt und das hat auf Anhieb funktioniert. &mdash;Bouni</p>
</li>
<li>
<p><strong>11.07.2012</strong> Wiederum am gestrigen Hackerspace Dienstag habe ich die (Grund)Funktionalität des MateDealers fertig gestellt. Es funktionieren nun die folgenden MDB Kommandos: RESET, SETUP, POLL, READER [ENABLE|DISABLE], VEND [REQUEST|SUCCESS]. Demenstprechend kann man nun eine Session starten, eine Getränk wählen, den Vend genehmigen, und das Resultat trinken ;)</p>
</li>
<li>
<p><strong>17.07.2012</strong> Seit heute funktioniert der Arduinoseitige Teil des Mate Dealers komplett.</p>
</li>
</ul>
<h2 id="juli-2013">Juli 2013</h2>
<ul>
<li><strong>02.07.2013</strong> Nach langem stillstand wurde heute eine lauffähige aber wahrscheinlich nicht sehr vertrauenswürdige Version der GUI auf dem single-board computer im MateDealer zum laufen gebracht. Weitere tests werden folgen.</li>
</ul>
<p>** Ab hier werden Schwerwiegende Änderungen am MateDealer Projekt stattfinden.**</p>
<ul>
<li><strong>30.07.2013</strong> Kurz bevor die Kids zum <a href="events:fez2013">FEZ Abend</a> zu uns gekommen sind hat sich der 2te Schacht des Matedealers verabschiedet. Er zeigt an er sei leer obwohl das nicht der Fall ist. Das durchmessen der Leitung und der Test des Schalters lassen darauf schliessen das es sich um einen Defekt auf der VMC Platine handelt.</li>
<li>Wenig später hat sich gleich noch ein weiterer Schacht verabschiedet.</li>
<li>Nach kurzem überlegen wir es wohl darauf hinauslaufen, das wir ein komplett eigenes PCB anfertigen um die Steuerung des Automaten zu übernehmen, was nicht wirklich wild ist, denn es sind nur 5 Motoren (DC) und 10 Schalter (Schacht leer + Motor Position erreicht) zu bedienen. Ein weiterer Vorteil wird sein das das komplette MDB wegfällt und man viele Fehlerquellen eliminiert.</li>
</ul>
<h1 id="software">Software</h1>
<p>Die Software die auf dem Arduino lauft ist auf <a href="https://github.com/Bouni/MateDealer">GitHub</a> zu finden.</p>
<hr>
<h1 id="probleme--lösungen">Probleme &amp; Lösungen</h1>
<h2 id="falsche-münzrohre">Falsche Münzrohre</h2>
<ul>
<li><strong>Problem:</strong> Der Münzprüfer verfügt über 4 Münzspeicher, wovon jede eine Münzsorte aufnimmt (5Cent, 10Cent, 20Cent, 50Cent). Eine dieser sogenannten Tuben passte nicht zur programmierten Münze (20Cent) was dazu führte das sich die einfallenden Münzen querstellten.</li>
<li><strong>Lösung</strong>: Der Hersteller hat uns freundlicherweise eine {{:projekte:mate_dealer:tubenvarianten_g46.pdf|Liste aller Tuben}} zugemailt und wir konnten die passende nachbestellen.</li>
<li><strong>Kosten:</strong> ~11€ + MwSt. &amp; Versand.</li>
</ul>
<h2 id="fehlender-schlüssel">Fehlender Schlüssel</h2>
<ul>
<li><strong>Problem:</strong> Als wir den Automaten gekauft haben, war er offen und es gab keine Schlüssel zum eingebauten Schloss mehr. Da niemand unbefugtes Zugang zum Inneren des Automaten haben soll muss ein Schloss mit Schlüssel her.</li>
<li><strong>Lösung</strong>: Nach einiger Suche konnten wir ein Baugleiches Schloss in bei <a href="http://www.coinoperatorshop.com/shop/product_info.php?cPath=21_37_39_364&amp;info=p5438_Lock-key-alike-T-Handle-inner-cylinder-lock.html">www.coinoperatorshop.com</a> finden und bestellen.</li>
<li><strong>Kosten:</strong> ~7€ + MwSt. &amp; Versand.</li>
</ul>
<h2 id="cashless-device">Cashless Device</h2>
<ul>
<li><strong>Problem:</strong> Im Ausgangszustand war im VMC ein EEPROM mit einer alten Software Version verbaut. Dieses hat keine Cashless Devices adressiert.</li>
<li><strong>Lösung</strong>: Nach einem Telefonat mit dem Hersteller des Automaten, haben wir ein neues EEPROM mit der aktuellen Version der Software &ldquo;BBMDEX5.14&rdquo; bestellt.</li>
<li><strong>Kosten:</strong> ~30€ + MwSt. &amp; Versand.</li>
</ul>
<h2 id="vmc-parametrierung">VMC Parametrierung</h2>
<ul>
<li><strong>Problem:</strong> Nach dem einabu des neuen EEPROM hat sich die Menüstruktur zum parametrieren des Automaten geändert. Das Handbuch das wir mit dem Automaten bekommen hatten war somit nicht mehr wirklich zu gebrauchen.</li>
<li><strong>Lösung</strong>: Eine freundliche Anfrage beim hersteller später haben wir ein {{:projekte:mate_dealer:bb01_einstellanleitung_080306_de.pdf|aktuelles Manual}} per Mail bekommen. Es passt zwar auch nicht ganz zum Menü, aber besser als das alte ist es.</li>
<li><strong>Kosten:</strong> 0€</li>
</ul>
<h2 id="füllstandsüberwachung">Füllstandsüberwachung</h2>
<ul>
<li><strong>Problem:</strong> Wenn man den Automaten bzw. einen Schacht bis oben hin füllt, passen ca. 25 Flaschen hinein. Der Wippschalter der den Füllstand überwacht meldet allerdings schon bei 10 verbleibenden Flaschen im Schacht das dieser leer sei.</li>
<li><strong>Lösung</strong>: Ein paar streifen 2mm Aluminium mit ~3x10cm und ein wenig Duct-Tape haben die Füllstandsüberwachung auf 1 verbleibende Flasche verbessert.</li>
<li><strong>Kosten</strong>: 0€</li>
</ul>
<hr>
<h1 id="wünsche-und-ideen">Wünsche und Ideen</h1>
<h2 id="bargeldloses-bezahlen">Bargeldloses Bezahlen</h2>
<ul>
<li><strong>Idee:</strong> Die Hauptmodfikation besteht darin das wir ein Bargeldloses Bezahlsystem entwickeln wollen. Realisiert wird das ganze in dem wir mit einem Mikrocontroller ein Cashless Device simulieren was wirderum über einen Single Borad PC der mit WLAN ausgestattet ist mit einem Server kommuniziert.</li>
<li><strong>Entwicklungsstand:</strong> 80%</li>
</ul>
<h2 id="genaue-füllstandsanzeige">Genaue Füllstandsanzeige</h2>
<ul>
<li><strong>Idee:</strong> Den Füllstand der einzelnen Schächte mit Hilfe Analoger Sensoren (Sharp GP2Y0A21YK0F) zu messen.</li>
<li><strong>Entwicklungsstand:</strong> 0%</li>
</ul>
<h2 id="temperatur-logging">Temperatur Logging</h2>
<ul>
<li><strong>Idee:</strong> Die Temperaturen im Kühlbereich des Automaten mit einem DS18S20 loggen.</li>
<li><strong>Entwicklungsstand:</strong> 0%</li>
</ul>
<h2 id="regelung-des-kühlaggregates">Regelung des Kühlaggregates</h2>
<ul>
<li><strong>Idee:</strong> Das Kühlaggregat mit dem uC regeln. Die verbaute Regelung mit Bimetall funktioniert nicht wirklich. Ausserdem lassen sich Nachtabsenkungen usw. Realisieren.</li>
<li><strong>Entwicklungsstand:</strong> 0%</li>
</ul>
<h2 id="display-scheibe">Display Scheibe</h2>
<ul>
<li><strong>Idee:</strong> Die Scheibe des Automaten die von ihrer Mineralwasser Werbung befreit wurde mit einem RGB Dot Matrix Display ausstatten. Wie z.B. <a href="http://www.youtube.com/watch?v=yzCAcbA51A0">das hier</a></li>
<li><strong>Entwicklungsstand:</strong> 0%</li>
</ul>
<h1 id="mdb-protokoll">MDB Protokoll</h1>
<p>

<figure class="figure m-1">
    <a href="/projects/matedealer/mdb-timing.png" data-featherlight="image">
        <img src="/projects/matedealer/mdb-timing_huab3702fbb312fd0696b84c1374be145c_94136_1100x0_resize_lanczos_3.png" class="figure-img img-thumbnail " width="1100">
    </a>
    
</figure>

<img src="mdb-flowchart.svg" width="1100x" ></p>
<h1 id="elektronik">Elektronik</h1>
<p><strong>20.09.2011</strong>\<br>
Hab mich entschieden das Elektronik &ldquo;Problem&rdquo; mit einem <strong><a href="http://arduino.cc/en/Main/ArduinoBoardMega2560">Arduino Mega 2560</a> + MEGA Proto PCB Shield</strong> zu realisieren. Das macht das ganze für andere eher Nachbaubar. Die Kosten werden etwa im selben Rahmen wie die bei einem Eigenbau liegen.
Evtl. wird das Shield mal als gefertigtes PCB gemacht und zum Selbstkostenpreis verkauft. Ist dann ne saubere Lösung. Die Bestellung sollte die Tage bei mir eintrudeln. &mdash;Bouni</p>
<h2 id="grundlegende-beschaltung">Grundlegende Beschaltung</h2>


<figure class="figure m-1">
    <a href="/projects/matedealer/mdb_atmega.png" data-featherlight="image">
        <img src="/projects/matedealer/mdb_atmega_hu5a369a58a01c40b7fb4eee247cab22ed_54306_1100x0_resize_lanczos_3.png" class="figure-img img-thumbnail " width="1100">
    </a>
    
</figure>

<p><img src="mdb-proto-shield.svg" width="1100x" ></p>
<h2 id="was-alles-auf-die-platine-soll">Was alles auf die Platine soll</h2>
<ul>
<li>1 Relais zum schalten des Kühlaggregates</li>
<li>1 Relais zum schalten des Lüfters</li>
<li>Anschlüsse für 1-wire Sensoren</li>
<li>Status LED&rsquo;s, evtl ein LCD</li>
<li>&hellip;</li>
</ul>
<h1 id="authentification">Authentification</h1>
<p>Die Authentification am Automaten soll mittels GNUPG Smartcard geschehen.
Wir sind schon im Besitz von 2 Card Readern vom Typ OmniKey CardMan</p>
<h2 id="how-to-zu-gnupg-mit-smartcard">How To zu GnuPG mit SmartCard</h2>
<p><a href="http://www.gnupg.org/howtos/card-howto/en/smartcard-howto-single.html">http://www.gnupg.org/howtos/card-howto/en/smartcard-howto-single.html</a></p>
<h1 id="vergleichbare-projekte">Vergleichbare Projekte</h1>
<ul>
<li><a href="http://wiki.nottinghack.org.uk/wiki/Vending_Machine/Cashless_Device">Nottinghack</a></li>
<li><a href="http://wiki.muc.ccc.de/matemat">CCC Muenchen</a></li>
<li><a href="http://wiki.chaostreff.ch/Mate_Automat">CCC Basel</a></li>
</ul>

</article>

		</div>
	<footer>
    <div class="footer-copyright text-center py-3 text-muted">
            <a href="/impressum/" class="text-muted">Impressum / Datenschutz</a>

        
            <div class="d-sm-inline">
                <span class="px-2 d-none d-sm-inline">&bull;</span>
                <i class="fa fa-rss text-muted mr-1" style="font-size: 1.25rem" aria-hidden="true"></i>
                
                    <a href="/index.xml" class="text-muted">All</a>
                 | 
                    <a href="/blog/index.xml" class="text-muted">Blog</a>
                 | 
                    <a href="/projects/index.xml" class="text-muted">Projects</a>
                </div><span class="px-2 d-none d-sm-inline">&bull;</span>

        <a href="https://github.com/reaktor23">
            <i class="fa fa-github text-muted" style="font-size: 1.25rem;" aria-hidden="true"></i>
        </a>

        <br />

        <span style="font-size: 0.7em;">build time: 2022-10-03 23:39 UTC</span>
    </div>
</footer>

	<script src="https://reaktor23.org/js/jquery.min.js"></script>
<script src="https://reaktor23.org/js/showdown.min.js"></script>
<script src="https://reaktor23.org/js/bootstrap.min.js"></script>
<script src="https://reaktor23.org/js/featherlight.min.js"></script>
<script src="https://reaktor23.org/js/reaktorstatus.js"></script>
<script src="https://reaktor23.org/js/talks.js"></script>

</body>
</html>
